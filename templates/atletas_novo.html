{% extends "base.html" %}

{% block title %}Novo Atleta{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Novo Atleta</h1>
    <p>Cadastro completo do atleta, responsável, plano e grupos.</p>
</div>

<div class="card">
    <form method="POST" enctype="multipart/form-data" class="form-grid">

        <!-- COLUNA 1: Dados do atleta -->
        <section class="form-section">
            <h2>Dados do atleta</h2>

            <div class="form-group">
                <label for="foto">Foto do atleta</label>
                <input type="file" name="foto" id="foto" accept="image/*">
                <p class="small">Você pode escolher uma foto do dispositivo ou tirar pela câmera (no celular).</p>
            </div>

            <div class="form-group">
                <label for="nome">Nome completo *</label>
                <input type="text" name="nome" id="nome" required>
            </div>

            <div class="form-group">
                <label for="data_nascimento">Data de nascimento *</label>
                <input type="date" name="data_nascimento" id="data_nascimento" required>
            </div>

            <div class="form-group">
                <label for="telefone">Telefone</label>
                <input type="text" name="telefone" id="telefone">
            </div>

            <div class="form-group">
                <label for="rg">RG</label>
                <input type="text" name="rg" id="rg">
            </div>

            <div class="form-group">
                <label for="cpf">CPF</label>
                <input type="text" name="cpf" id="cpf">
            </div>

            <div class="form-group">
                <label for="validade_atestado">Validade do atestado médico</label>
                <input type="date" name="validade_atestado" id="validade_atestado">
            </div>

            <div class="form-group">
                <label for="informacoes_adicionais">Informações adicionais</label>
                <textarea name="informacoes_adicionais" id="informacoes_adicionais" rows="3"></textarea>
            </div>
        </section>

        <!-- COLUNA 2: Responsável -->
        <section class="form-section">
            <h2>Responsável</h2>

            <div class="form-group">
                <label for="nome_responsavel">Nome do responsável</label>
                <input type="text" name="nome_responsavel" id="nome_responsavel">
            </div>

            <div class="form-group">
                <label for="cpf_responsavel">CPF do responsável</label>
                <input type="text" name="cpf_responsavel" id="cpf_responsavel">
            </div>

            <div class="form-group">
                <label for="telefone_responsavel">Telefone do responsável</label>
                <input type="text" name="telefone_responsavel" id="telefone_responsavel">
            </div>

            <div class="form-group">
                <label for="parentesco">Parentesco</label>
                <input type="text" name="parentesco" id="parentesco" placeholder="Pai, mãe, tio...">
            </div>

            <h3>Endereço</h3>

            <div class="form-group">
                <label for="cep">CEP</label>
                <input type="text" name="cep" id="cep" placeholder="00000-000">
            </div>

            <div class="form-group">
                <label for="logradouro">Rua / Avenida</label>
                <input type="text" name="logradouro" id="logradouro">
            </div>

            <div class="form-group">
                <label for="numero">Número</label>
                <input type="text" name="numero" id="numero">
            </div>

            <div class="form-group">
                <label for="complemento">Complemento</label>
                <input type="text" name="complemento" id="complemento">
            </div>

            <div class="form-group">
                <label for="bairro">Bairro</label>
                <input type="text" name="bairro" id="bairro">
            </div>

            <div class="form-group">
                <label for="cidade">Cidade</label>
                <input type="text" name="cidade" id="cidade">
            </div>

            <div class="form-group">
                <label for="estado">Estado (UF)</label>
                <input type="text" name="estado" id="estado" maxlength="2">
            </div>
        </section>

        <!-- COLUNA 3: Plano e grupos -->
        <section class="form-section">
            <h2>Plano e grupos</h2>

            <div class="form-group">
                <label for="plano_id">Plano contratado</label>
                <select name="plano_id" id="plano_id">
                    <option value="">Selecione um plano</option>
                    {% for plano in planos %}
                        <option value="{{ plano.id }}">
                            {{ plano.nome }} - R$ {{ '{:,.2f}'.format(plano.valor_mensal) }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>Grupos do atleta</label>
                <div class="checkbox-list">
                    {% for grupo in grupos %}
                        <label class="checkbox-item">
                            <input type="checkbox" name="grupos_ids" value="{{ grupo.id }}">
                            <span>{{ grupo.nome }}</span>
                        </label>
                    {% endfor %}
                </div>
            </div>

            <div class="form-actions">
                <a href="{{ url_for('atletas.listar') }}" class="btn-secondary">Cancelar</a>
                <button type="submit" class="btn-primary">Salvar atleta</button>
            </div>
        </section>
    </form>
</div>
{% endblock %}