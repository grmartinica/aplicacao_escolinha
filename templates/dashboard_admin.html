{% extends "base.html" %}
{% block title %}Visão Geral{% endblock %}

{% block content %}

<div class="main-header">
    <div>
        <h1 class="page-title">Visão Geral</h1>
        <p class="page-subtitle">Resumo rápido da situação da escolinha.</p>
    </div>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-label">Alunos Ativos</div>
        <div class="stat-value">{{ total_atletas_ativos }}</div>
        <div class="stat-meta">Alunos com matrícula ativa.</div>
    </div>

    <div class="stat-card" style="border-left:4px solid #22c55e;">
        <div class="stat-label">Receita Total (Paga)</div>
        <div class="stat-value">R$ {{ '%.2f'|format(receita_paga or 0) }}</div>
        <div class="stat-meta">Somente mensalidades pagas.</div>
    </div>

    <div class="stat-card" style="border-left:4px solid #f97316;">
        <div class="stat-label">Doc. pendente</div>
        <div class="stat-value">{{ documentos_pendentes }}</div>
        <div class="stat-meta">
            <a href="{{ url_for('atletas.listar', docs='pendente') }}">Ver</a>
        </div>
    </div>

    <div class="stat-card" style="border-left:4px solid #ef4444;">
        <div class="stat-label">Alunos inadimplentes</div>
        <div class="stat-value">{{ qtd_inadimplentes }}</div>
        <div class="stat-meta">
            <a href="{{ url_for('financeiro.resumo', filtro='inadimplente') }}">Ver todos</a>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <div>
            <div class="card-title">Próximo treino</div>
            <div class="card-subtitle">Atividade mais próxima na agenda.</div>
        </div>
    </div>
    {% if proxima_atividade %}
        <p><strong>{{ proxima_atividade.titulo }}</strong></p>
        <p>{{ proxima_atividade.data.strftime('%d/%m/%Y') }} ·
           {{ proxima_atividade.hora_inicio.strftime('%H:%M') }} ·
           {{ proxima_atividade.grupo.nome if proxima_atividade.grupo }}</p>
    {% else %}
        <p>Nenhum treino agendado para os próximos dias.</p>
    {% endif %}
</div>

{% endblock %}