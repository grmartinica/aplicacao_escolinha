<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Login · Garotos do Martinica</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="login-body">

<div class="login-card">
    <div class="login-header">
        <div class="login-logo-circle">GM</div>
        <h1>Garotos do Martinica</h1>
        <p style="font-size:0.85rem;">Portal do Aluno e Gestão</p>
    </div>

    <div class="login-tabs">
        <div class="login-tab active" data-tab="admin">
            Admin / Professor
        </div>
        <div class="login-tab" data-tab="responsavel">
            Sou Responsável
        </div>
    </div>

    <div class="login-body-inner">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <div style="margin-bottom:0.75rem;">
              {% for category, message in messages %}
                <div class="badge badge-{{ 'danger' if category == 'error' else 'neutral' }}">{{ message }}</div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <!-- FORM ADMIN/PROFESSOR -->
        <form method="post"
              action="{{ url_for('auth.login') }}"
              id="form-admin">
            <input type="hidden" name="tipo_login" value="admin">

            <div class="form-group">
                <label>E-mail</label>
                <input type="email" name="email" class="form-control"
                       placeholder="seu@email.com" required>
            </div>
            <div class="form-group">
                <label>Senha</label>
                <input type="password" name="senha" class="form-control"
                       placeholder="••••••••" required>
            </div>

            <button type="submit" class="btn btn-primary" style="width:100%; margin-top:0.5rem;">
                Entrar no Sistema
            </button>
        </form>

        <!-- FORM RESPONSÁVEL -->
        <form method="post"
              action="{{ url_for('auth.login_responsavel') }}"
              id="form-responsavel"
              style="display:none;">
            <input type="hidden" name="tipo_login" value="responsavel">
            <div class="form-group">
                <label>CPF do responsável</label>
                <input type="text" name="cpf" class="form-control"
                       placeholder="000.000.000-00" required>
            </div>
            <div class="form-group">
                <label>Telefone (senha)</label>
                <input type="text" name="telefone" class="form-control"
                       placeholder="(11) 99999-9999" required>
            </div>
            <button type="submit" class="btn btn-primary" style="width:100%; margin-top:0.5rem;">
                Entrar no Sistema
            </button>
        </form>

        <p style="margin-top:0.75rem; font-size:0.75rem; color:#6b7280; text-align:center;">
            © {{ current_year or 2025 }} Garotos do Martinica.
        </p>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const tabAdmin = document.querySelector('.login-tab[data-tab="admin"]');
    const tabResp  = document.querySelector('.login-tab[data-tab="responsavel"]');
    const formAdmin = document.getElementById('form-admin');
    const formResp  = document.getElementById('form-responsavel');

    tabAdmin.addEventListener('click', () => {
        tabAdmin.classList.add('active');
        tabResp.classList.remove('active');
        formAdmin.style.display = 'block';
        formResp.style.display = 'none';
    });

    tabResp.addEventListener('click', () => {
        tabResp.classList.add('active');
        tabAdmin.classList.remove('active');
        formAdmin.style.display = 'none';
        formResp.style.display = 'block';
    });
});
</script>

</body>
</html>