{% extends "base.html" %}
{% block title %}Usuários do Sistema · Aurora Tech{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title">Usuários do Sistema</h1>
        <p class="page-subtitle">
            Controle de acesso de admins, professores e responsáveis.
        </p>
    </div>
    <div class="page-header-actions">
        <a href="{{ url_for('usuarios_sistema.novo') }}" class="btn btn-primary">
            + Novo usuário
        </a>
    </div>
</div>

<div class="card">
    <div class="card-body">
        {% if usuarios %}
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Nome</th>
                <th>E-mail</th>
                <th>Perfil</th>
                <th>Status</th>
                <th>Ações</th>
            </tr>
            </thead>
            <tbody>
            {% for u in usuarios %}
            <tr>
                <td>{{ u.nome }}</td>
                <td>{{ u.email }}</td>
                <td>{{ u.role }}</td>
                <td>
                    {% if u.ativo %}
                        <span class="badge badge-success">Ativo</span>
                    {% else %}
                        <span class="badge badge-neutral">Inativo</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('usuarios_sistema.editar', usuario_id=u.id) }}"
                       class="btn btn-sm btn-outline">
                        Editar
                    </a>

                    <form method="post"
                          action="{{ url_for('usuarios_sistema.reset_senha', usuario_id=u.id) }}"
                          style="display:inline;">
                        <button type="submit" class="btn btn-sm btn-secondary">
                            Resetar senha
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
        {% else %}
            <p class="empty-state">
                Nenhum usuário cadastrado ainda.
            </p>
        {% endif %}
    </div>
</div>
{% endblock %}
